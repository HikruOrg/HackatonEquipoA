# Environment Configuration for Lead Research Agent

# Azure Foundry Configuration (Required for AI agent)
AZURE_FOUNDRY_ENDPOINT=https://your-foundry-endpoint.services.ai.azure.com/api/projects/YourProject
AZURE_FOUNDRY_API_KEY=your-foundry-api-key-here
AZURE_FOUNDRY_AGENT_ID=asst_your-agent-id-here

# Azure OpenAI Configuration (if using direct OpenAI instead of Foundry)
AZURE_OPENAI_API_KEY=your-azure-openai-api-key-here
AZURE_OPENAI_ENDPOINT=https://your-resource-name.openai.azure.com/
AZURE_OPENAI_DEPLOYMENT=gpt-4

# Microsoft Graph Configuration (Required for Outlook email integration)
# Get these from Azure App Registration for accessing LinkSV Pulse emails

# Option 1: Delegated Authentication (Development/Interactive)
# Use when running locally and you want to authenticate as yourself
# The application will open a browser for you to login once
MICROSOFT_GRAPH_CLIENT_ID=your-client-id-here
MICROSOFT_GRAPH_TENANT_ID=your-tenant-id-here
# Leave MICROSOFT_GRAPH_CLIENT_SECRET empty to use delegated auth
MICROSOFT_GRAPH_CLIENT_SECRET=

# Option 2: App-Only Authentication (Production/Service)
# Use when running as a service/scheduled task without user interaction
# Requires Mail.Read and Mail.Send permissions granted by admin in Azure AD
MICROSOFT_GRAPH_CLIENT_ID=your-client-id-here
MICROSOFT_GRAPH_TENANT_ID=your-tenant-id-here
MICROSOFT_GRAPH_CLIENT_SECRET=your-client-secret-here
# Specify the target mailbox user ID (UPN or Object ID) when using app-only auth
MICROSOFT_GRAPH_USER_ID=user@domain.com

# Worker Configuration
# WORKER_EXECUTION_INTERVAL: How frequently to check if execution should occur (REQUIRED for continuous mode)
# Format 1: Integer (minutes) - e.g., "60" = check every 1 hour
# Format 2: TimeSpan (HH:mm:ss) - e.g., "01:00:00" = check every 1 hour
# Leave empty for triggered mode (run once and exit)
WORKER_EXECUTION_INTERVAL=60

# WORKER_EXECUTION_TIME: Specific time of day to execute (OPTIONAL)
# Format: "HH:mm" (24-hour format) - e.g., "14:30" = 2:30 PM, "09:00" = 9:00 AM
# If set, worker will only execute when current time matches this time
# If not set, worker will execute at every interval
# Example: WORKER_EXECUTION_TIME=14:30
WORKER_EXECUTION_TIME=

# WORKER_TIMEZONE: Timezone for execution time (OPTIONAL)
# Format: Standard timezone ID (e.g., "Central America Standard Time", "Pacific Standard Time")
# Default: UTC if not specified
# Common timezone IDs:
#   - "Central America Standard Time" (UTC-06:00) - El Salvador, Guatemala, Honduras
#   - "Pacific Standard Time" (UTC-08:00) - US West Coast
#   - "Eastern Standard Time" (UTC-05:00) - US East Coast
#   - "UTC" (UTC+00:00) - Coordinated Universal Time
# To see all available timezones, run: [System.TimeZoneInfo]::GetSystemTimeZones() in PowerShell
WORKER_TIMEZONE=Central America Standard Time

# Common interval values (WORKER_EXECUTION_INTERVAL):
# 5 = Every 5 minutes (for testing with specific time)
# 15 = Every 15 minutes (recommended when using WORKER_EXECUTION_TIME)
# 30 = Every 30 minutes
# 60 = Every hour (good balance for scheduled execution)
# 120 = Every 2 hours
# 360 = Every 6 hours
# 1440 = Once per day (24 hours)

# Common interval values (WORKER_EXECUTION_INTERVAL):
# 30 = Every 30 minutes
# 60 = Every hour (default recommended)
# 120 = Every 2 hours
# 360 = Every 6 hours
# 1440 = Once per day (24 hours)

# Common time values (WORKER_EXECUTION_TIME):
# 09:00 = 9:00 AM daily
# 14:30 = 2:30 PM daily
# 18:00 = 6:00 PM daily
# 23:59 = 11:59 PM daily

# Instructions:
# 1. Copy this file to .env
# 2. Replace the placeholder values with your actual Azure credentials
# 3. For production, use App-Only Authentication (Option 2)
# 4. Never commit the .env file to version control
# 5. For local development, you can use Delegated Authentication (Option 1)

# AUTHENTICATION FLOW:
# - If MICROSOFT_GRAPH_CLIENT_SECRET is empty: Uses InteractiveBrowserCredential (delegated auth - requires browser login)
# - If MICROSOFT_GRAPH_CLIENT_SECRET is set: Uses ClientSecretCredential (app-only auth - no user interaction needed)
# 
# For production services, use Option 2 (app-only auth) and grant these permissions in Azure AD admin center:
# - Mail.Read (to read newsletters)
# - Mail.Send (to send results)

# EXECUTION MODES:
# Mode 1: Scheduled Daily Execution (Recommended for Production)
#   Set WORKER_EXECUTION_INTERVAL to check frequency (e.g., "15" for every 15 minutes)
#   Set WORKER_EXECUTION_TIME to desired time (e.g., "14:30" for 2:30 PM)
#   Set WORKER_TIMEZONE to your timezone (e.g., "Central America Standard Time")
#   Worker checks every interval if current time matches execution time, executes once per day
#   Use with Azure WebJob in Continuous mode
#   Example: Check every 15 minutes, execute only at 2:30 PM El Salvador time
#
# Mode 2: Continuous Interval (Good for Frequent Processing)
#   Set WORKER_EXECUTION_INTERVAL to desired interval (e.g., "60" for every hour)
#   Leave WORKER_EXECUTION_TIME empty
#   Worker executes at every interval regardless of time
#   Use with Azure WebJob in Continuous mode
#
# Mode 3: Triggered (Good for Development/Testing)
#   Leave WORKER_EXECUTION_INTERVAL empty
#   Optionally set WORKER_EXECUTION_TIME to test time-based execution
#   Worker executes once (if time matches) and exits
#   Use for manual execution or Azure WebJob in Triggered mode